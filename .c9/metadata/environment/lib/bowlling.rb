{"changed":true,"filter":false,"title":"bowlling.rb","tooltip":"/lib/bowlling.rb","value":"# ボウリングのスコアを管理するクラス\nclass Bowling\n#インスタンスを生成する時に処理が実行される\ndef initialize\n    #スコアの合計\n    @total_score = 0\n    #scores = []\n    #一時保存用の配列\n    @temp = []\nend\n\n#スコアの合計を返す\ndef total_score\n    @total_score\nend\n\n#スコアを追加する\ndef add_score(pins)\n    #一時保存用のスコアに、倒したピンの数を追加する\n    @temp << pins\n    #2投分のデータが入っているか、1投目がストライクだったら、1フレーム分のスコアとして全体に追加する\n    if @temp.size == 2 || strike?(@temp)\n        @scores << @temp\n        @temp = []\n    end\nend\n\n#スコアの合計を計算する\ndef calc_score\n    @scores.each.with_index(1) do |score, index|\n    #最終フレーム以外でのストライクなら、スコアにボーナスを含めて合計する\n    if strike?(score) && not_last_frame?(index)\n    @total_score += calc_strike_bonus(index)\n    #最終フレーム以外でのスペアなら、スコアにボーナスを含めて合計する\n    elsif spare?(score) && not_last_frame?(index)\n    @total_score += calc_spare_bonus(index)\n    else\n    @total_score += score.inject(:+)\n    end\n    end\nend\nend\n\nprivate\n#スペアかどうか判定する\ndef spare?(score)\n    score.inject(:+) == 10\nend\n\n#ストライクかどうか判定する\ndef strike?(score)\n    score.first == 10\nend\n\n#最終フレームかどうか判定する\ndef not_last_frame?(index)\n    index < 10\nend\n\n#スペアボーナスを含んだ値でスコアを計算する\ndef calc_spare_bonus(index)\n    10 + @scores[index].first\nend\n    \nrequire \"bowling\"\ndescribe \"ボウリングのスコア計算\" do\n    #インスタンスの生成を共通化\n    before do\n        @game = Bolling.new\n    end\n    describe \"全体の合計\" do\n        context \"全ての投球がガターだった場合\" do\n            it \"0になること\" do\n                add_many_scores(20, 0)\n                #合計を計算\n                @game.calc_score\n                expect(@game.total_score).to eq 0\n            \n        end\n    end\n    context \"全ての投球で1ピンずつ倒した場合\" do\n        it \"20になること\" do\n        add_many_scores(20, 1)\n        #合計を計算\n        @game.calc_score\n        expect(@game.total_score).to eq 20\n        end\n    end\n    context \"スペアを取った場合\" do\n        it \"スペアボーナスが加算されること\" do\n            #第一フレームで3点,7点のスペア\n            @game.add_score(3)\n            @game.add_score(7)\n            #第二フレームの一投目で4点\n            @game.add_score(4)\n            #以降は全てガター\n            add_many_scores(17,0)\n            #合計を計算\n            @game.calc_score\n            #期待する合計 ※()内はボーナス点\n            #3 + 7 + 4 + (4) = 18\n            expect(@game.total_score).to eq 18\n        end\n    end\n    context \"フレーム違いでスペアになるようなスコアだった場合\" do\n        it \"スペアボーナスが加算されないこと\" do\n            #第一フレームで3点,5点\n            @game.add_score(3)\n            @game.add_score(5)\n            #第二フレームで5点,4点\n            @game.add_score(5)\n            @game.add_score(4)\n            #以降は全てガター\n            add_many_scores(16,0)\n            #合計を計算\n            @game.calc_score\n            #期待する合計\n            #3 + 5 + 5 + 4 = 17\n            expect(@game.total_score).to eq 17\n        end\n    end\n    context \"最終フレームでスペアを取った場合\" do\n        it \"スペアボーナスが加算されないこと\" do\n            #第一フレームで3点,7点のスペア\n            @game.add_score(3)\n            @game.add_score(7)\n            #第二フレームの一投目で4点\n            @game.add_score(4)\n            #15球は全てガター\n            add_many_scores(15,0)\n            #最終フレームで3点,7点のスペア\n            @game.add_score(3)\n            @game.add_score(7)\n            #合計を計算\n            @game.calc_score\n            #期待する合計 ※()内はボーナス点\n            #3 + 7 + 4 + (4) + 3 + 7 = 28\n            expect(@game.total_score).to eq 28\n        end\n    end\n    context \"ストライクを取った場合\" do\n        it \"ストライクボーナスが加算されること\" do\n            #第一フレームでストライク\n            @game.add_score(5)\n            @game.add_score(4)\n            #以降は全てガター\n            add_many_scores(16, 0)\n            #合計を計算\n            @game.calc_score\n            #期待する合計 ※()内はボーナス点\n            #10 + 5 + (5) + 4 + (4) = 28\n            expect(@game.total_score).to eq 28\n        end\n    end\n    context \"ダブルを取った場合\" do\n        it \"それぞれのストライクボーナスが加算されること\" do\n            #第一フレームでストライク\n            @game.add_score(10)\n            #第二フレームもストライク\n            @game.add_score(10)\n            #第三フレームで5点,4点\n            @game.add_score(5)\n            @game.add_score(4)\n            #以降は全てガター\n            add_many_scores(14,0)\n            #合計を計算\n            @game.calc_score\n            #期待する合計 ※()内はボーナス点\n            #10 + 10 + (10) + 5 + (5 + 5) + 4 + (4) = 53\n            expect(@game.total_score).to eq 53\n        end\n    end\n    context \"ターキーを取った場合\" do\n        it \"それぞれのストライクボーナスが加算されること\" do\n            #第一フレームでストライク\n            @game.add_score(10)\n            #第二フレームもストライク\n            @game.add_score(10)\n            #第三フレームもストライク\n            @game.add_score(10)\n            #第四フレームで5点,4点\n            @game.add_score(5)\n            @game.add_score(4)\n            #以降は全てガター\n            add_many_scores(12,0)\n            #合計を計算\n            @game.calc_score\n            #期待する合計 ※()内はボーナス点\n            #10 + 10 + (10) + 10 + (10 + 10) + 5 + (5 + 5) + 4 + (4) = 83\n            expect(@game.total_score).to eq 83\n        end\n    end\n    context \"最終フレームでストライクを取った場合\" do\n        it \"ストライクボーナスが加算されないこと\" do\n            #第一フレームでストライク\n            @game.add_score(10)\n            #第二フレームで5点,4点\n            @game.add_score(5)\n            @game.add_score(4)\n            #3～9フレームは全てガター\n            add_many_scores(14,0)\n            #最終フレームでストライク\n            @game.add_score(10)\n            #合計を計算\n            @game.calc_score\n            #期待する合計 ※()内はボーナス点\n            #10 + 5 + (5) + 4 + (4) + 10 = 38\n            expect(@game.total_score).to eq 38\n        end\n    end\nend\nend\nprivate\n# 複数回のスコア追加をまとめて実行する\ndef add_many_scores(count, pins)\n    count.times do\n        @game.add_score(pins)\n    end\nend\n    ","undoManager":{"mark":21,"position":100,"stack":[[{"start":{"row":44,"column":0},"end":{"row":44,"column":7},"action":"remove","lines":["    end"],"id":1523},{"start":{"row":43,"column":40},"end":{"row":44,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":40,"column":4},"end":{"row":40,"column":8},"action":"remove","lines":["    "],"id":1524}],[{"start":{"row":42,"column":4},"end":{"row":42,"column":8},"action":"remove","lines":["    "],"id":1525}],[{"start":{"row":53,"column":3},"end":{"row":54,"column":0},"action":"insert","lines":["",""],"id":1526}],[{"start":{"row":54,"column":0},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":1527},{"start":{"row":55,"column":0},"end":{"row":55,"column":1},"action":"insert","lines":["#"]}],[{"start":{"row":55,"column":1},"end":{"row":55,"column":2},"action":"insert","lines":["s"],"id":1528},{"start":{"row":55,"column":2},"end":{"row":55,"column":3},"action":"insert","lines":["u"]}],[{"start":{"row":55,"column":2},"end":{"row":55,"column":3},"action":"remove","lines":["u"],"id":1529},{"start":{"row":55,"column":1},"end":{"row":55,"column":2},"action":"remove","lines":["s"]}],[{"start":{"row":55,"column":1},"end":{"row":55,"column":7},"action":"insert","lines":["ストライクか"],"id":1530},{"start":{"row":55,"column":7},"end":{"row":55,"column":10},"action":"insert","lines":["どうか"]}],[{"start":{"row":55,"column":10},"end":{"row":55,"column":14},"action":"insert","lines":["判定する"],"id":1531}],[{"start":{"row":55,"column":14},"end":{"row":56,"column":0},"action":"insert","lines":["",""],"id":1532},{"start":{"row":56,"column":0},"end":{"row":56,"column":1},"action":"insert","lines":["d"]},{"start":{"row":56,"column":1},"end":{"row":56,"column":2},"action":"insert","lines":["e"]}],[{"start":{"row":56,"column":2},"end":{"row":56,"column":3},"action":"insert","lines":["f"],"id":1533}],[{"start":{"row":56,"column":3},"end":{"row":56,"column":4},"action":"insert","lines":[" "],"id":1534},{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"insert","lines":["s"]},{"start":{"row":56,"column":5},"end":{"row":56,"column":6},"action":"insert","lines":["t"]},{"start":{"row":56,"column":6},"end":{"row":56,"column":7},"action":"insert","lines":["r"]},{"start":{"row":56,"column":7},"end":{"row":56,"column":8},"action":"insert","lines":["i"]}],[{"start":{"row":56,"column":8},"end":{"row":56,"column":9},"action":"insert","lines":["k"],"id":1535},{"start":{"row":56,"column":9},"end":{"row":56,"column":10},"action":"insert","lines":["e"]},{"start":{"row":56,"column":10},"end":{"row":56,"column":11},"action":"insert","lines":["?"]}],[{"start":{"row":56,"column":11},"end":{"row":56,"column":13},"action":"insert","lines":["()"],"id":1536}],[{"start":{"row":56,"column":12},"end":{"row":56,"column":13},"action":"insert","lines":["s"],"id":1537},{"start":{"row":56,"column":13},"end":{"row":56,"column":14},"action":"insert","lines":["c"]},{"start":{"row":56,"column":14},"end":{"row":56,"column":15},"action":"insert","lines":["o"]},{"start":{"row":56,"column":15},"end":{"row":56,"column":16},"action":"insert","lines":["r"]},{"start":{"row":56,"column":16},"end":{"row":56,"column":17},"action":"insert","lines":["e"]}],[{"start":{"row":56,"column":18},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":1538},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":57,"column":4},"end":{"row":57,"column":5},"action":"insert","lines":["s"],"id":1539},{"start":{"row":57,"column":5},"end":{"row":57,"column":6},"action":"insert","lines":["c"]},{"start":{"row":57,"column":6},"end":{"row":57,"column":7},"action":"insert","lines":["o"]},{"start":{"row":57,"column":7},"end":{"row":57,"column":8},"action":"insert","lines":["r"]},{"start":{"row":57,"column":8},"end":{"row":57,"column":9},"action":"insert","lines":["e"]}],[{"start":{"row":57,"column":9},"end":{"row":57,"column":10},"action":"insert","lines":["."],"id":1540},{"start":{"row":57,"column":10},"end":{"row":57,"column":11},"action":"insert","lines":["f"]},{"start":{"row":57,"column":11},"end":{"row":57,"column":12},"action":"insert","lines":["i"]},{"start":{"row":57,"column":12},"end":{"row":57,"column":13},"action":"insert","lines":["r"]},{"start":{"row":57,"column":13},"end":{"row":57,"column":14},"action":"insert","lines":["s"]}],[{"start":{"row":57,"column":14},"end":{"row":57,"column":15},"action":"insert","lines":["t"],"id":1541}],[{"start":{"row":57,"column":15},"end":{"row":57,"column":16},"action":"insert","lines":[" "],"id":1542},{"start":{"row":57,"column":16},"end":{"row":57,"column":17},"action":"insert","lines":["="]},{"start":{"row":57,"column":17},"end":{"row":57,"column":18},"action":"insert","lines":["="]}],[{"start":{"row":57,"column":18},"end":{"row":57,"column":19},"action":"insert","lines":[" "],"id":1543},{"start":{"row":57,"column":19},"end":{"row":57,"column":20},"action":"insert","lines":["1"]},{"start":{"row":57,"column":20},"end":{"row":57,"column":21},"action":"insert","lines":["0"]}],[{"start":{"row":57,"column":21},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":1544},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]},{"start":{"row":58,"column":4},"end":{"row":58,"column":5},"action":"insert","lines":["e"]},{"start":{"row":58,"column":5},"end":{"row":58,"column":6},"action":"insert","lines":["n"]},{"start":{"row":58,"column":6},"end":{"row":58,"column":7},"action":"insert","lines":["d"]},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":34,"column":64},"end":{"row":35,"column":0},"action":"insert","lines":["",""],"id":1545},{"start":{"row":35,"column":0},"end":{"row":35,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":35,"column":8},"end":{"row":35,"column":12},"action":"remove","lines":["    "],"id":1546},{"start":{"row":35,"column":4},"end":{"row":35,"column":8},"action":"remove","lines":["    "]},{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"remove","lines":["    "]},{"start":{"row":34,"column":64},"end":{"row":35,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":30,"column":16},"end":{"row":30,"column":17},"action":"remove","lines":["ペ"],"id":1547}],[{"start":{"row":30,"column":16},"end":{"row":30,"column":17},"action":"remove","lines":["ア"],"id":1548}],[{"start":{"row":30,"column":16},"end":{"row":30,"column":17},"action":"insert","lines":["s"],"id":1549},{"start":{"row":30,"column":17},"end":{"row":30,"column":18},"action":"insert","lines":["i"]}],[{"start":{"row":30,"column":17},"end":{"row":30,"column":18},"action":"remove","lines":["i"],"id":1550},{"start":{"row":30,"column":16},"end":{"row":30,"column":17},"action":"remove","lines":["s"]}],[{"start":{"row":30,"column":16},"end":{"row":30,"column":20},"action":"insert","lines":["トライク"],"id":1551}],[{"start":{"row":31,"column":11},"end":{"row":31,"column":12},"action":"remove","lines":["e"],"id":1552},{"start":{"row":31,"column":10},"end":{"row":31,"column":11},"action":"remove","lines":["r"]},{"start":{"row":31,"column":9},"end":{"row":31,"column":10},"action":"remove","lines":["o"]},{"start":{"row":31,"column":8},"end":{"row":31,"column":9},"action":"remove","lines":["c"]}],[{"start":{"row":31,"column":8},"end":{"row":31,"column":9},"action":"insert","lines":["t"],"id":1553},{"start":{"row":31,"column":9},"end":{"row":31,"column":10},"action":"insert","lines":["r"]},{"start":{"row":31,"column":10},"end":{"row":31,"column":11},"action":"insert","lines":["i"]},{"start":{"row":31,"column":11},"end":{"row":31,"column":12},"action":"insert","lines":["k"]},{"start":{"row":31,"column":12},"end":{"row":31,"column":13},"action":"insert","lines":["e"]}],[{"start":{"row":32,"column":0},"end":{"row":33,"column":34},"action":"remove","lines":["        #次のフレームもストライクで、なおかつ最終フレーム以外なら、","        #もう一つ次のフレームの一投目をボーナスの対象にする"],"id":1554}],[{"start":{"row":32,"column":0},"end":{"row":32,"column":1},"action":"insert","lines":[" "],"id":1555},{"start":{"row":32,"column":1},"end":{"row":32,"column":2},"action":"insert","lines":[" "]},{"start":{"row":32,"column":2},"end":{"row":32,"column":3},"action":"insert","lines":[" "]},{"start":{"row":32,"column":3},"end":{"row":32,"column":4},"action":"insert","lines":[" "]},{"start":{"row":32,"column":4},"end":{"row":32,"column":5},"action":"insert","lines":[" "]},{"start":{"row":32,"column":5},"end":{"row":32,"column":6},"action":"insert","lines":[" "]},{"start":{"row":32,"column":6},"end":{"row":32,"column":7},"action":"insert","lines":[" "]},{"start":{"row":32,"column":7},"end":{"row":32,"column":8},"action":"insert","lines":[" "]}],[{"start":{"row":32,"column":4},"end":{"row":32,"column":8},"action":"remove","lines":["    "],"id":1556},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"remove","lines":["    "]},{"start":{"row":31,"column":47},"end":{"row":32,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":31,"column":47},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":1557},{"start":{"row":32,"column":0},"end":{"row":32,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":32,"column":8},"end":{"row":32,"column":9},"action":"insert","lines":["@"],"id":1558},{"start":{"row":32,"column":9},"end":{"row":32,"column":10},"action":"insert","lines":["t"]},{"start":{"row":32,"column":10},"end":{"row":32,"column":11},"action":"insert","lines":["o"]},{"start":{"row":32,"column":11},"end":{"row":32,"column":12},"action":"insert","lines":["t"]},{"start":{"row":32,"column":12},"end":{"row":32,"column":13},"action":"insert","lines":["a"]},{"start":{"row":32,"column":13},"end":{"row":32,"column":14},"action":"insert","lines":["l"]}],[{"start":{"row":32,"column":14},"end":{"row":32,"column":15},"action":"insert","lines":["_"],"id":1559},{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["s"]},{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"insert","lines":["c"]},{"start":{"row":32,"column":17},"end":{"row":32,"column":18},"action":"insert","lines":["o"]},{"start":{"row":32,"column":18},"end":{"row":32,"column":19},"action":"insert","lines":["r"]},{"start":{"row":32,"column":19},"end":{"row":32,"column":20},"action":"insert","lines":["e"]}],[{"start":{"row":32,"column":20},"end":{"row":32,"column":21},"action":"insert","lines":[" "],"id":1560},{"start":{"row":32,"column":21},"end":{"row":32,"column":22},"action":"insert","lines":["+"]}],[{"start":{"row":32,"column":22},"end":{"row":32,"column":23},"action":"insert","lines":["="],"id":1561}],[{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"insert","lines":[" "],"id":1562}],[{"start":{"row":32,"column":24},"end":{"row":32,"column":25},"action":"insert","lines":["c"],"id":1563},{"start":{"row":32,"column":25},"end":{"row":32,"column":26},"action":"insert","lines":["a"]},{"start":{"row":32,"column":26},"end":{"row":32,"column":27},"action":"insert","lines":["l"]},{"start":{"row":32,"column":27},"end":{"row":32,"column":28},"action":"insert","lines":["c"]}],[{"start":{"row":32,"column":28},"end":{"row":32,"column":29},"action":"insert","lines":["_"],"id":1564},{"start":{"row":32,"column":29},"end":{"row":32,"column":30},"action":"insert","lines":["s"]},{"start":{"row":32,"column":30},"end":{"row":32,"column":31},"action":"insert","lines":["t"]},{"start":{"row":32,"column":31},"end":{"row":32,"column":32},"action":"insert","lines":["r"]},{"start":{"row":32,"column":32},"end":{"row":32,"column":33},"action":"insert","lines":["i"]}],[{"start":{"row":32,"column":33},"end":{"row":32,"column":34},"action":"insert","lines":["k"],"id":1565},{"start":{"row":32,"column":34},"end":{"row":32,"column":35},"action":"insert","lines":["e"]},{"start":{"row":32,"column":35},"end":{"row":32,"column":36},"action":"insert","lines":["_"]},{"start":{"row":32,"column":36},"end":{"row":32,"column":37},"action":"insert","lines":["b"]}],[{"start":{"row":32,"column":37},"end":{"row":32,"column":38},"action":"insert","lines":["o"],"id":1566},{"start":{"row":32,"column":38},"end":{"row":32,"column":39},"action":"insert","lines":["n"]},{"start":{"row":32,"column":39},"end":{"row":32,"column":40},"action":"insert","lines":["u"]},{"start":{"row":32,"column":40},"end":{"row":32,"column":41},"action":"insert","lines":["s"]}],[{"start":{"row":32,"column":41},"end":{"row":32,"column":43},"action":"insert","lines":["()"],"id":1567}],[{"start":{"row":32,"column":42},"end":{"row":32,"column":43},"action":"insert","lines":["i"],"id":1568},{"start":{"row":32,"column":43},"end":{"row":32,"column":44},"action":"insert","lines":["n"]},{"start":{"row":32,"column":44},"end":{"row":32,"column":45},"action":"insert","lines":["d"]},{"start":{"row":32,"column":45},"end":{"row":32,"column":46},"action":"insert","lines":["e"]},{"start":{"row":32,"column":46},"end":{"row":32,"column":47},"action":"insert","lines":["x"]}],[{"start":{"row":32,"column":48},"end":{"row":33,"column":0},"action":"insert","lines":["",""],"id":1569},{"start":{"row":33,"column":0},"end":{"row":33,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":33,"column":8},"end":{"row":33,"column":9},"action":"insert","lines":["#"],"id":1570}],[{"start":{"row":33,"column":9},"end":{"row":33,"column":17},"action":"insert","lines":["最終フレーム以外"],"id":1571}],[{"start":{"row":33,"column":17},"end":{"row":33,"column":19},"action":"insert","lines":["での"],"id":1572}],[{"start":{"row":33,"column":19},"end":{"row":33,"column":24},"action":"insert","lines":["スペアなら"],"id":1573},{"start":{"row":33,"column":24},"end":{"row":33,"column":25},"action":"insert","lines":["、"]}],[{"start":{"row":33,"column":25},"end":{"row":33,"column":29},"action":"insert","lines":["スコアに"],"id":1574}],[{"start":{"row":33,"column":29},"end":{"row":33,"column":41},"action":"insert","lines":["ボーナスを含めて合計する"],"id":1575}],[{"start":{"row":33,"column":41},"end":{"row":34,"column":0},"action":"insert","lines":["",""],"id":1576},{"start":{"row":34,"column":0},"end":{"row":34,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":34,"column":8},"end":{"row":34,"column":9},"action":"insert","lines":["e"],"id":1577},{"start":{"row":34,"column":9},"end":{"row":34,"column":10},"action":"insert","lines":["l"]},{"start":{"row":34,"column":10},"end":{"row":34,"column":11},"action":"insert","lines":["s"]},{"start":{"row":34,"column":11},"end":{"row":34,"column":12},"action":"insert","lines":["i"]},{"start":{"row":34,"column":12},"end":{"row":34,"column":13},"action":"insert","lines":["f"]}],[{"start":{"row":34,"column":13},"end":{"row":34,"column":14},"action":"insert","lines":[" "],"id":1578},{"start":{"row":34,"column":14},"end":{"row":34,"column":15},"action":"insert","lines":["s"]},{"start":{"row":34,"column":15},"end":{"row":34,"column":16},"action":"insert","lines":["p"]},{"start":{"row":34,"column":16},"end":{"row":34,"column":17},"action":"insert","lines":["a"]},{"start":{"row":34,"column":17},"end":{"row":34,"column":18},"action":"insert","lines":["r"]},{"start":{"row":34,"column":18},"end":{"row":34,"column":19},"action":"insert","lines":["e"]}],[{"start":{"row":34,"column":19},"end":{"row":34,"column":20},"action":"insert","lines":["?"],"id":1579}],[{"start":{"row":34,"column":20},"end":{"row":34,"column":22},"action":"insert","lines":["()"],"id":1580}],[{"start":{"row":34,"column":21},"end":{"row":34,"column":22},"action":"insert","lines":["s"],"id":1581},{"start":{"row":34,"column":22},"end":{"row":34,"column":23},"action":"insert","lines":["c"]},{"start":{"row":34,"column":23},"end":{"row":34,"column":24},"action":"insert","lines":["o"]},{"start":{"row":34,"column":24},"end":{"row":34,"column":25},"action":"insert","lines":["r"]},{"start":{"row":34,"column":25},"end":{"row":34,"column":26},"action":"insert","lines":["e"]}],[{"start":{"row":34,"column":27},"end":{"row":34,"column":28},"action":"insert","lines":[" "],"id":1582}],[{"start":{"row":34,"column":28},"end":{"row":34,"column":29},"action":"insert","lines":["&"],"id":1583},{"start":{"row":34,"column":29},"end":{"row":34,"column":30},"action":"insert","lines":["&"]}],[{"start":{"row":34,"column":30},"end":{"row":34,"column":31},"action":"insert","lines":[" "],"id":1584},{"start":{"row":34,"column":31},"end":{"row":34,"column":32},"action":"insert","lines":["n"]},{"start":{"row":34,"column":32},"end":{"row":34,"column":33},"action":"insert","lines":["o"]},{"start":{"row":34,"column":33},"end":{"row":34,"column":34},"action":"insert","lines":["t"]}],[{"start":{"row":34,"column":34},"end":{"row":34,"column":35},"action":"insert","lines":["_"],"id":1585},{"start":{"row":34,"column":35},"end":{"row":34,"column":36},"action":"insert","lines":["l"]},{"start":{"row":34,"column":36},"end":{"row":34,"column":37},"action":"insert","lines":["a"]},{"start":{"row":34,"column":37},"end":{"row":34,"column":38},"action":"insert","lines":["s"]}],[{"start":{"row":34,"column":38},"end":{"row":34,"column":39},"action":"insert","lines":["t"],"id":1586}],[{"start":{"row":34,"column":39},"end":{"row":34,"column":40},"action":"insert","lines":["_"],"id":1587},{"start":{"row":34,"column":40},"end":{"row":34,"column":41},"action":"insert","lines":["f"]},{"start":{"row":34,"column":41},"end":{"row":34,"column":42},"action":"insert","lines":["r"]},{"start":{"row":34,"column":42},"end":{"row":34,"column":43},"action":"insert","lines":["a"]}],[{"start":{"row":34,"column":43},"end":{"row":34,"column":44},"action":"insert","lines":["m"],"id":1588},{"start":{"row":34,"column":44},"end":{"row":34,"column":45},"action":"insert","lines":["e"]},{"start":{"row":34,"column":45},"end":{"row":34,"column":46},"action":"insert","lines":["?"]}],[{"start":{"row":34,"column":46},"end":{"row":34,"column":48},"action":"insert","lines":["()"],"id":1589}],[{"start":{"row":34,"column":47},"end":{"row":34,"column":48},"action":"insert","lines":["i"],"id":1590},{"start":{"row":34,"column":48},"end":{"row":34,"column":49},"action":"insert","lines":["n"]},{"start":{"row":34,"column":49},"end":{"row":34,"column":50},"action":"insert","lines":["d"]},{"start":{"row":34,"column":50},"end":{"row":34,"column":51},"action":"insert","lines":["e"]},{"start":{"row":34,"column":51},"end":{"row":34,"column":52},"action":"insert","lines":["x"]}],[{"start":{"row":34,"column":53},"end":{"row":35,"column":0},"action":"insert","lines":["",""],"id":1591},{"start":{"row":35,"column":0},"end":{"row":35,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":35,"column":12},"end":{"row":35,"column":13},"action":"insert","lines":["@"],"id":1592},{"start":{"row":35,"column":13},"end":{"row":35,"column":14},"action":"insert","lines":["t"]},{"start":{"row":35,"column":14},"end":{"row":35,"column":15},"action":"insert","lines":["o"]},{"start":{"row":35,"column":15},"end":{"row":35,"column":16},"action":"insert","lines":["t"]},{"start":{"row":35,"column":16},"end":{"row":35,"column":17},"action":"insert","lines":["a"]},{"start":{"row":35,"column":17},"end":{"row":35,"column":18},"action":"insert","lines":["l"]}],[{"start":{"row":35,"column":18},"end":{"row":35,"column":19},"action":"insert","lines":["_"],"id":1593},{"start":{"row":35,"column":19},"end":{"row":35,"column":20},"action":"insert","lines":["s"]},{"start":{"row":35,"column":20},"end":{"row":35,"column":21},"action":"insert","lines":["c"]},{"start":{"row":35,"column":21},"end":{"row":35,"column":22},"action":"insert","lines":["o"]},{"start":{"row":35,"column":22},"end":{"row":35,"column":23},"action":"insert","lines":["r"]},{"start":{"row":35,"column":23},"end":{"row":35,"column":24},"action":"insert","lines":["e"]}],[{"start":{"row":35,"column":24},"end":{"row":35,"column":25},"action":"insert","lines":[" "],"id":1594},{"start":{"row":35,"column":25},"end":{"row":35,"column":26},"action":"insert","lines":["+"]},{"start":{"row":35,"column":26},"end":{"row":35,"column":27},"action":"insert","lines":["="]}],[{"start":{"row":35,"column":27},"end":{"row":35,"column":28},"action":"insert","lines":[" "],"id":1595}],[{"start":{"row":35,"column":28},"end":{"row":35,"column":29},"action":"insert","lines":["c"],"id":1596},{"start":{"row":35,"column":29},"end":{"row":35,"column":30},"action":"insert","lines":["a"]},{"start":{"row":35,"column":30},"end":{"row":35,"column":31},"action":"insert","lines":["l"]}],[{"start":{"row":35,"column":31},"end":{"row":35,"column":32},"action":"insert","lines":["c"],"id":1597}],[{"start":{"row":35,"column":32},"end":{"row":35,"column":33},"action":"insert","lines":["_"],"id":1598},{"start":{"row":35,"column":33},"end":{"row":35,"column":34},"action":"insert","lines":["s"]},{"start":{"row":35,"column":34},"end":{"row":35,"column":35},"action":"insert","lines":["p"]},{"start":{"row":35,"column":35},"end":{"row":35,"column":36},"action":"insert","lines":["a"]}],[{"start":{"row":35,"column":36},"end":{"row":35,"column":37},"action":"insert","lines":["r"],"id":1599},{"start":{"row":35,"column":37},"end":{"row":35,"column":38},"action":"insert","lines":["e"]},{"start":{"row":35,"column":38},"end":{"row":35,"column":39},"action":"insert","lines":["_"]}],[{"start":{"row":35,"column":39},"end":{"row":35,"column":40},"action":"insert","lines":["b"],"id":1600},{"start":{"row":35,"column":40},"end":{"row":35,"column":41},"action":"insert","lines":["o"]},{"start":{"row":35,"column":41},"end":{"row":35,"column":42},"action":"insert","lines":["n"]},{"start":{"row":35,"column":42},"end":{"row":35,"column":43},"action":"insert","lines":["u"]},{"start":{"row":35,"column":43},"end":{"row":35,"column":44},"action":"insert","lines":["s"]}],[{"start":{"row":35,"column":44},"end":{"row":35,"column":46},"action":"insert","lines":["()"],"id":1601}],[{"start":{"row":35,"column":45},"end":{"row":35,"column":46},"action":"insert","lines":["i"],"id":1602},{"start":{"row":35,"column":46},"end":{"row":35,"column":47},"action":"insert","lines":["n"]},{"start":{"row":35,"column":47},"end":{"row":35,"column":48},"action":"insert","lines":["d"]},{"start":{"row":35,"column":48},"end":{"row":35,"column":49},"action":"insert","lines":["e"]},{"start":{"row":35,"column":49},"end":{"row":35,"column":50},"action":"insert","lines":["x"]}],[{"start":{"row":36,"column":1},"end":{"row":37,"column":57},"action":"remove","lines":["       if strike?(@scores[index]) && not_last_frame?(index + 1)","            @total_score += 20 + @scores[index + 1].first"],"id":1603},{"start":{"row":36,"column":0},"end":{"row":36,"column":1},"action":"remove","lines":[" "]},{"start":{"row":35,"column":51},"end":{"row":36,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":37,"column":57},"end":{"row":37,"column":58},"action":"remove","lines":[")"],"id":1604},{"start":{"row":37,"column":56},"end":{"row":37,"column":57},"action":"remove","lines":["+"]},{"start":{"row":37,"column":55},"end":{"row":37,"column":56},"action":"remove","lines":[":"]},{"start":{"row":37,"column":54},"end":{"row":37,"column":55},"action":"remove","lines":["("]},{"start":{"row":37,"column":53},"end":{"row":37,"column":54},"action":"remove","lines":["t"]},{"start":{"row":37,"column":52},"end":{"row":37,"column":53},"action":"remove","lines":["c"]},{"start":{"row":37,"column":51},"end":{"row":37,"column":52},"action":"remove","lines":["e"]},{"start":{"row":37,"column":50},"end":{"row":37,"column":51},"action":"remove","lines":["j"]}],[{"start":{"row":37,"column":49},"end":{"row":37,"column":50},"action":"remove","lines":["n"],"id":1605},{"start":{"row":37,"column":48},"end":{"row":37,"column":49},"action":"remove","lines":["i"]},{"start":{"row":37,"column":47},"end":{"row":37,"column":48},"action":"remove","lines":["."]},{"start":{"row":37,"column":46},"end":{"row":37,"column":47},"action":"remove","lines":["]"]},{"start":{"row":37,"column":45},"end":{"row":37,"column":46},"action":"remove","lines":["x"]},{"start":{"row":37,"column":44},"end":{"row":37,"column":45},"action":"remove","lines":["e"]},{"start":{"row":37,"column":43},"end":{"row":37,"column":44},"action":"remove","lines":["d"]},{"start":{"row":37,"column":42},"end":{"row":37,"column":43},"action":"remove","lines":["n"]},{"start":{"row":37,"column":41},"end":{"row":37,"column":42},"action":"remove","lines":["i"]}],[{"start":{"row":37,"column":40},"end":{"row":37,"column":41},"action":"remove","lines":["["],"id":1606},{"start":{"row":37,"column":39},"end":{"row":37,"column":40},"action":"remove","lines":["s"]},{"start":{"row":37,"column":38},"end":{"row":37,"column":39},"action":"remove","lines":["e"]},{"start":{"row":37,"column":37},"end":{"row":37,"column":38},"action":"remove","lines":["r"]},{"start":{"row":37,"column":36},"end":{"row":37,"column":37},"action":"remove","lines":["o"]},{"start":{"row":37,"column":35},"end":{"row":37,"column":36},"action":"remove","lines":["c"]},{"start":{"row":37,"column":34},"end":{"row":37,"column":35},"action":"remove","lines":["s"]},{"start":{"row":37,"column":33},"end":{"row":37,"column":34},"action":"remove","lines":["@"]},{"start":{"row":37,"column":32},"end":{"row":37,"column":33},"action":"remove","lines":[" "]},{"start":{"row":37,"column":31},"end":{"row":37,"column":32},"action":"remove","lines":["+"]}],[{"start":{"row":37,"column":30},"end":{"row":37,"column":31},"action":"remove","lines":[" "],"id":1607},{"start":{"row":37,"column":29},"end":{"row":37,"column":30},"action":"remove","lines":["0"]}],[{"start":{"row":37,"column":28},"end":{"row":37,"column":29},"action":"remove","lines":["1"],"id":1608}],[{"start":{"row":37,"column":28},"end":{"row":37,"column":29},"action":"insert","lines":["s"],"id":1609},{"start":{"row":37,"column":29},"end":{"row":37,"column":30},"action":"insert","lines":["c"]},{"start":{"row":37,"column":30},"end":{"row":37,"column":31},"action":"insert","lines":["o"]},{"start":{"row":37,"column":31},"end":{"row":37,"column":32},"action":"insert","lines":["r"]},{"start":{"row":37,"column":32},"end":{"row":37,"column":33},"action":"insert","lines":["e"]}],[{"start":{"row":37,"column":33},"end":{"row":37,"column":34},"action":"insert","lines":["."],"id":1610},{"start":{"row":37,"column":34},"end":{"row":37,"column":35},"action":"insert","lines":["i"]},{"start":{"row":37,"column":35},"end":{"row":37,"column":36},"action":"insert","lines":["n"]},{"start":{"row":37,"column":36},"end":{"row":37,"column":37},"action":"insert","lines":["j"]},{"start":{"row":37,"column":37},"end":{"row":37,"column":38},"action":"insert","lines":["e"]},{"start":{"row":37,"column":38},"end":{"row":37,"column":39},"action":"insert","lines":["c"]}],[{"start":{"row":37,"column":39},"end":{"row":37,"column":40},"action":"insert","lines":["t"],"id":1611}],[{"start":{"row":37,"column":40},"end":{"row":37,"column":42},"action":"insert","lines":["()"],"id":1612}],[{"start":{"row":37,"column":41},"end":{"row":37,"column":42},"action":"insert","lines":[":"],"id":1613},{"start":{"row":37,"column":42},"end":{"row":37,"column":43},"action":"insert","lines":["+"]}],[{"start":{"row":39,"column":0},"end":{"row":43,"column":40},"action":"remove","lines":["        #最終フレーム以外でのスペアなら、スコアにボーナスを含めて合計する","    elsif spare?(score) && not_last_frame?(index)","        @total_score += calc_spare_bonus(index)","    else","        @total_score += score.inject(:+)"],"id":1614},{"start":{"row":38,"column":11},"end":{"row":39,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":40,"column":2},"end":{"row":40,"column":3},"action":"remove","lines":["d"],"id":1615},{"start":{"row":40,"column":1},"end":{"row":40,"column":2},"action":"remove","lines":["n"]},{"start":{"row":40,"column":0},"end":{"row":40,"column":1},"action":"remove","lines":["e"]},{"start":{"row":39,"column":7},"end":{"row":40,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":34,"column":4},"end":{"row":34,"column":8},"action":"remove","lines":["    "],"id":1616}],[{"start":{"row":36,"column":4},"end":{"row":36,"column":8},"action":"remove","lines":["    "],"id":1617}],[{"start":{"row":38,"column":4},"end":{"row":38,"column":8},"action":"remove","lines":["    "],"id":1618}],[{"start":{"row":35,"column":10},"end":{"row":35,"column":11},"action":"remove","lines":[" "],"id":1619},{"start":{"row":35,"column":9},"end":{"row":35,"column":10},"action":"remove","lines":[" "]},{"start":{"row":35,"column":8},"end":{"row":35,"column":9},"action":"remove","lines":[" "]},{"start":{"row":35,"column":4},"end":{"row":35,"column":8},"action":"remove","lines":["    "]}],[{"start":{"row":32,"column":4},"end":{"row":32,"column":8},"action":"remove","lines":["    "],"id":1620}],[{"start":{"row":33,"column":4},"end":{"row":33,"column":8},"action":"remove","lines":["    "],"id":1621}],[{"start":{"row":35,"column":4},"end":{"row":35,"column":5},"action":"remove","lines":[" "],"id":1622}],[{"start":{"row":37,"column":8},"end":{"row":37,"column":12},"action":"remove","lines":["    "],"id":1623},{"start":{"row":37,"column":4},"end":{"row":37,"column":8},"action":"remove","lines":["    "]}]]},"ace":{"folds":[],"scrolltop":240,"scrollleft":0,"selection":{"start":{"row":37,"column":4},"end":{"row":37,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":16,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1627964354076}